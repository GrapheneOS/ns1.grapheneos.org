define public_ipv4 = 45.61.188.113;
define public_ipv6 = 2605:6400:0040:ffbd:14e7:d270:fd75:600c;
define neighbor_as = 53667;
define neighbor_ipv4 = 169.254.169.179;
define neighbor_ipv6 = 2605:6400:ffff::2;
define bgp_password = "{{bgp_password}}";

filter grapheneos_ipv4_filter {
    # Cogent: set localpref to 10 upon entering AF Region from other regions of the Cogent backbone
    bgp_community.add((174, 932));
    # Cogent: set localpref to 10 upon entering AU Region from other regions of the Cogent backbone
    bgp_community.add((174, 942));
    # Cogent: set localpref to 10 upon entering AP Region from other regions of the Cogent backbone
    bgp_community.add((174, 962));
    # Cogent: set localpref to 10 upon entering EU Region from other regions of the Cogent backbone
    bgp_community.add((174, 982));

    # FL-IX: do not advertise to GSL
    bgp_large_community.add((63221, 0, 137409));

    accept;
};

filter grapheneos_ipv6_filter {
    # Cogent: set localpref to 10 upon entering AF Region from other regions of the Cogent backbone
    bgp_community.add((174, 932));
    # Cogent: set localpref to 10 upon entering AU Region from other regions of the Cogent backbone
    bgp_community.add((174, 942));
    # Cogent: set localpref to 10 upon entering AP Region from other regions of the Cogent backbone
    bgp_community.add((174, 962));
    # Cogent: set localpref to 10 upon entering EU Region from other regions of the Cogent backbone
    bgp_community.add((174, 982));

    # FL-IX: do not advertise to GSL
    bgp_large_community.add((63221, 0, 137409));

    accept;
};

protocol static buyvm_ipv4_route {
    ipv4;
    route 198.251.90.93/32 via public_ipv4;
};
