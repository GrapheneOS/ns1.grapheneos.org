define public_ipv4 = 38.175.103.38;
define public_ipv6 = 2a0e:6901:201:dd:26a3:f0ff:fe48:6091;
define neighbor_as = 57695;
define neighbor_ipv4 = 100.100.0.0;
define neighbor_ipv6 = 2a0b:4342:ffff::;

function no_advertise(int asn) {
    bgp_large_community.add((33108, 0, asn)); # SIX
}

filter grapheneos_filter {
    # Cogent: set localpref to 70 (below peers)
    bgp_community.add((174, 70));
    # Cogent: set localpref to 10 upon entering AF
    bgp_community.add((174, 932));
    # Cogent: set localpref to 10 upon entering AU
    bgp_community.add((174, 942));
    # Cogent: set localpref to 10 upon entering SA
    bgp_community.add((174, 952));
    # Cogent: set localpref to 10 upon entering AP
    bgp_community.add((174, 962));
    # Cogent: set localpref to 10 upon entering EU
    bgp_community.add((174, 982));

    # Arelion: set localpref to 50 beyond the connected region
    bgp_community.add((1299, 10050));
    # Arelion: prepend 2x to all peers in Europe
    bgp_community.add((1299, 2002));
    # Arelion: prepend 2x to all peers in Asia & Pacific
    bgp_community.add((1299, 7002));
    # Arelion: prepend 2x to China Unicom in Europe and North America
    bgp_community.add((1299, 2872));
    bgp_community.add((1299, 5872));
    # Arelion: prepend 2x to China Telecom in Europe and North America
    bgp_community.add((1299, 2882));
    bgp_community.add((1299, 5882));

    # NTT: set localpref to 96 (customer fallback)
    bgp_community.add((2914, 450));
    # NTT: set localpref to 50 beyond the connected region
    bgp_community.add((2914, 436));
    # NTT: prepend 2x to all customers in Europe
    bgp_community.add((2914, 4212));
    # NTT: prepend 2x to all peers in Europe
    bgp_community.add((2914, 4222));
    # NTT: prepend 2x to all customers in Asia
    bgp_community.add((2914, 4412));
    # NTT: prepend 2x to all peers in Asia
    bgp_community.add((2914, 4422));
    # NTT: prepend 2x to all customers in South America
    bgp_community.add((2914, 4612));
    # NTT: prepend 2x to all peers in South America
    bgp_community.add((2914, 4622));

    # GTT: set localpref way below peers in configured regions
    bgp_community.add((3257, 1960));
    # GTT: set localpref in Europe
    bgp_community.add((3257, 2010));
    # GTT: set localpref in Asia
    bgp_community.add((3257, 2011));
    # GTT: set localpref in Africa
    bgp_community.add((3257, 2012));
    # GTT: set localpref in South America
    bgp_community.add((3257, 2013));
    # GTT: prepend 2x in Europe
    bgp_community.add((3257, 2492));
    # GTT: prepend 2x in Asia
    bgp_community.add((3257, 2592));
    # GTT: prepend 2x in Africa
    bgp_community.add((3257, 2692));
    # GTT: prepend 2x in South America
    bgp_community.add((3257, 2892));

    # Lumen: set BGP Local Pref to 70 (less than peer routes)
    bgp_community.add((3356, 70));

    # PCCW: set localpref to 70
    bgp_community.add((3491, 51011));
    # PCCW: set localpref to 60 beyond the connected region
    bgp_community.add((3491, 51912));
    # PCCW: prepend 2x to all peers in Europe
    bgp_community.add((3491, 50302));
    # PCCW: prepend 2x to all peers in Asia
    bgp_community.add((3491, 50402));
    # PCCW: prepend 2x to all peers in Africa
    bgp_community.add((3491, 50502));
    # PCCW: prepend 2x to all peers in Australia
    bgp_community.add((3491, 50702));

    # Sparkle (Seabone): set localpref to 50 (backup route)
    bgp_community.add((6762, 1050));

    # Misaka.io: do not advertise to HE
    bgp_ext_community.add((rt, 65009, 6939));
    # Misaka.io: prepend 1x to HE
    bgp_ext_community.add((rt, 65001, 6939));

    # Comcast: do not advertise to Bell
    bgp_community.add((65100, 577));
    # Comcast: do not advertise to Orange
    bgp_community.add((65100, 5511));
    # Comcast: do not advertise to TATA
    bgp_community.add((65100, 6453));

    # Misaka.io: do not advertise to Google
    bgp_ext_community.add((rt, 65009, 15169));

    # Core-Backbone: do not advertise to Europe
    bgp_community.add((33891, 41000));
    # Core-Backbone: do not advertise to Asia
    bgp_community.add((33891, 41020));
    # Core-Backbone: do not advertise on PNI with Bharti
    bgp_community.add((33891, 2230));
    # Core-Backbone: do not advertise on IXP
    bgp_community.add((33891, 4000)); # N-IX
    bgp_community.add((33891, 5000)); # DE-CIX Frankfurt
    bgp_community.add((33891, 6000)); # LINX
    bgp_community.add((33891, 7000)); # AMS-IX
    bgp_community.add((33891, 8000)); # SwissIX
    bgp_community.add((33891, 9000)); # VIX
    bgp_community.add((33891, 10000)); # Peering.cz Prague
    bgp_community.add((33891, 11000)); # HOPUS Frankfurt
    bgp_community.add((33891, 12000)); # DE-CIX New York
    bgp_community.add((33891, 13000)); # NYIIX
    bgp_community.add((33891, 14000)); # MegaIX Dusseldorf
    bgp_community.add((33891, 15000)); # France-IX
    bgp_community.add((33891, 16000)); # Netnod
    bgp_community.add((33891, 17000)); # NIX.CZ
    bgp_community.add((33891, 18000)); # SAIX
    bgp_community.add((33891, 19000)); # Equinix Singapore
    bgp_community.add((33891, 20000)); # BCIX
    bgp_community.add((33891, 21000)); # Community-IX
    bgp_community.add((33891, 22000)); # DE-CIX Dusseldorf
    bgp_community.add((33891, 23000)); # DE-CIX Munich
    bgp_community.add((33891, 24000)); # DE-CIX Hamburg
    bgp_community.add((33891, 25000)); # DE-CIX Madrid
    bgp_community.add((33891, 26000)); # STIX Copenhagen
    bgp_community.add((33891, 27000)); # Espanix Madrid
    bgp_community.add((33891, 28000)); # Stuttgart-IX
    bgp_community.add((33891, 29000)); # MIX-IT

    # Misaka.io: prepend 1x to SIX
    bgp_ext_community.add((rt, 65001, 33108));

    # CDN77: do not advertise to backbone
    bgp_community.add((60068, 60010));

    no_advertise(3216); # VimpelCom
    no_advertise(3303); # Swisscom
    no_advertise(4766); # Korea Telecom
    no_advertise(6939); # HE
    no_advertise(8359); # MTS
    no_advertise(9498); # Bharti
    no_advertise(24482); # SG.GS
    no_advertise(26042); # FiberState
    no_advertise(26141); # CUBEPATH
    no_advertise(57463); # NetIX
    no_advertise(58453); # China Mobile International
    no_advertise(58715); # Earth Telecommunication
    no_advertise(139901); # Startrek Telecom

    accept;
};
