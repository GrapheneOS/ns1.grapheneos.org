define public_ipv4 = 38.175.100.57;
define public_ipv6 = 2a0e:6902:5010:d9:26a3:f0ff:fe48:de47;
define neighbor_as = 57695;
define neighbor_ipv4 = 100.100.0.0;
define neighbor_ipv6 = 2a0b:4342:ffff::;

filter grapheneos_ipv4_filter {
    # Cogent: set localpref to 10 upon entering AF Region from other regions of the Cogent backbone
    bgp_community.add((174, 932));
    # Cogent: set localpref to 10 upon entering AU Region from other regions of the Cogent backbone
    bgp_community.add((174, 942));
    # Cogent: set localpref to 10 upon entering AP Region from other regions of the Cogent backbone
    bgp_community.add((174, 962));
    # Cogent: set localpref to 10 upon entering EU Region from other regions of the Cogent backbone
    bgp_community.add((174, 982));

    # Arelion: set localpref to 50 within EU
    bgp_community.add((1299, 12050));
    # Arelion: set localpref to 50 within AP
    bgp_community.add((1299, 17050));
    # Arelion: prepend 2x to all peers in Europe
    bgp_community.add((1299, 2002));
    # Arelion: prepend 2x to all peers in Asia & Pacific
    bgp_community.add((1299, 7002));

    # NTT: set localpref to 50 within EU
    bgp_community.add((65530, 3200));
    # NTT: set localpref to 50 within AS
    bgp_community.add((65530, 3400));
    # NTT: prepend 2x to all customers in Europe
    bgp_community.add((2914, 4212));
    # NTT: prepend 2x to all peers in Europe
    bgp_community.add((2914, 4222));
    # NTT: prepend 2x to all customers in Asia
    bgp_community.add((2914, 4412));
    # NTT: prepend 2x to all peers in Asia
    bgp_community.add((2914, 4422));

    # GTT: set localpref way below peers in configured regions
    bgp_community.add((3257, 1960));
    # GTT: set localpref in Europe
    bgp_community.add((3257, 2010));
    # GTT: set localpref in Asia
    bgp_community.add((3257, 2011));
    # GTT: set localpref in Africa
    bgp_community.add((3257, 2012));
    # GTT: prepend 2x in Europe
    bgp_community.add((3257, 2492));
    # GTT: prepend 2x in Asia
    bgp_community.add((3257, 2592));
    # GTT: prepend 2x in Africa
    bgp_community.add((3257, 2692));

    # FL-IX: do not advertise to Swisscom
    bgp_large_community.add((63221, 0, 3303));

    # PCCW: set localpref to 60 beyond the connected region
    bgp_community.add((3491, 51912));
    # PCCW: prepend 2x to all peers in Europe
    bgp_community.add((3491, 50302));
    # PCCW: prepend 2x to all peers in Asia
    bgp_community.add((3491, 50402));
    # PCCW: prepend 2x to all peers in Africa
    bgp_community.add((3491, 50502));
    # PCCW: prepend 2x to all peers in Australia
    bgp_community.add((3491, 50702));

    # CDN77: do not advertise to AS6762 Sparkle (Seabone)
    bgp_community.add((60068, 40100));

    # FL-IX: do not advertise to Bharti
    bgp_large_community.add((63221, 0, 9498));

    # FL-IX: do not advertise to China Mobile International
    bgp_large_community.add((63221, 0, 58453));

    # Misaka.io: prepend 1x to FL-IX
    bgp_ext_community.add((rt, 65001, 63221));

    # FL-IX: do not advertise to GSL
    bgp_large_community.add((63221, 0, 137409));

    # FL-IX: do not advertise to Startrek Telecom
    bgp_large_community.add((63221, 0, 139901));

    accept;
};

filter grapheneos_ipv6_filter {
    # Cogent: set localpref to 10 upon entering AF Region from other regions of the Cogent backbone
    bgp_community.add((174, 932));
    # Cogent: set localpref to 10 upon entering AU Region from other regions of the Cogent backbone
    bgp_community.add((174, 942));
    # Cogent: set localpref to 10 upon entering AP Region from other regions of the Cogent backbone
    bgp_community.add((174, 962));
    # Cogent: set localpref to 10 upon entering EU Region from other regions of the Cogent backbone
    bgp_community.add((174, 982));

    # Arelion: set localpref to 50 within EU
    bgp_community.add((1299, 12050));
    # Arelion: set localpref to 50 within AP
    bgp_community.add((1299, 17050));
    # Arelion: prepend 2x to all peers in Europe
    bgp_community.add((1299, 2002));
    # Arelion: prepend 2x to all peers in Asia & Pacific
    bgp_community.add((1299, 7002));

    # NTT: set localpref to 50 within EU
    bgp_community.add((65530, 3200));
    # NTT: set localpref to 50 within AS
    bgp_community.add((65530, 3400));
    # NTT: prepend 2x to all customers in Europe
    bgp_community.add((2914, 4212));
    # NTT: prepend 2x to all peers in Europe
    bgp_community.add((2914, 4222));
    # NTT: prepend 2x to all customers in Asia
    bgp_community.add((2914, 4412));
    # NTT: prepend 2x to all peers in Asia
    bgp_community.add((2914, 4422));

    # GTT: set localpref way below peers in configured regions
    bgp_community.add((3257, 1960));
    # GTT: set localpref in Europe
    bgp_community.add((3257, 2010));
    # GTT: set localpref in Asia
    bgp_community.add((3257, 2011));
    # GTT: set localpref in Africa
    bgp_community.add((3257, 2012));
    # GTT: prepend 2x in Europe
    bgp_community.add((3257, 2492));
    # GTT: prepend 2x in Asia
    bgp_community.add((3257, 2592));
    # GTT: prepend 2x in Africa
    bgp_community.add((3257, 2692));

    # FL-IX: do not advertise to Swisscom
    bgp_large_community.add((63221, 0, 3303));

    # PCCW: set localpref to 60 beyond the connected region
    bgp_community.add((3491, 51912));
    # PCCW: prepend 2x to all peers in Europe
    bgp_community.add((3491, 50302));
    # PCCW: prepend 2x to all peers in Asia
    bgp_community.add((3491, 50402));
    # PCCW: prepend 2x to all peers in Africa
    bgp_community.add((3491, 50502));
    # PCCW: prepend 2x to all peers in Australia
    bgp_community.add((3491, 50702));

    # CDN77: do not advertise to AS6762 Sparkle (Seabone)
    bgp_community.add((60068, 40100));

    # FL-IX: do not advertise to Bharti
    bgp_large_community.add((63221, 0, 9498));

    # FL-IX: do not advertise to China Mobile International
    bgp_large_community.add((63221, 0, 58453));

    # Misaka.io: prepend 1x to FL-IX
    bgp_ext_community.add((rt, 65001, 63221));

    # FL-IX: do not advertise to GSL
    bgp_large_community.add((63221, 0, 137409));

    # FL-IX: do not advertise to Startrek Telecom
    bgp_large_community.add((63221, 0, 139901));

    accept;
};
